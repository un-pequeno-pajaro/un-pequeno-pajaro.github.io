<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="darkreader-lock">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>random potsa effect</title>
<style>
	body {
		margin: 10px;
		font-family: Consolas;
		background-color: black;
		color: white;
	}
	button {cursor: pointer;}

	#potsa {
		width: 500px;
	}
	.slider, #potsa{
		box-sizing: border-box;
	}

	.slider {
		margin-left: 0;
		width: 500px;
  		-webkit-appearance: none;
  		height: 20px;
  		border-radius: 0px; /*5px*/
  		border:3.5px ridge darkgray;
  		border-left-width: 0px;
  		border-right-width: 0px;
  		background-color: #666666;
  		margin-top: 10px;
  		-webkit-transition: .2s;
  		transition: opacity .2s;
	}
	.slider::-webkit-slider-thumb {
  		-webkit-appearance: none;
  		appearance: none;
  		width: 15px;
  		height: 30px;
  		background-color: lightgray;
  		transition: 0s;
  		border:none;
  		border-radius: 0px;
		padding-top: 5px;
		padding-bottom: 5px;
  		cursor: pointer;
	}
	.slider::-moz-range-thumb {
  		width: 14.5px;
  		height: 20px;
  		background-color: lightgray;
		transition: 0s;
  		border:none;
  		/*border: 1px ridge darkgray;*/
  		border-radius: 0px;
		padding-top: 5px;
		padding-bottom: 5px;
  		cursor: pointer;
	}
	.slider::-webkit-slider-thumb:hover {
		background-color: white;
	}
	.slider::-moz-range-thumb:hover{
		background-color: white;
	}

	input {
		width: 80px;
	}
	#inputs {
		width: 400px;
		margin-top: 0;
	}
	#inputs p input {
		display: inline-block;
	}
	#inputs p {
		margin-bottom: -23px;
	}

	#fullscreenbtn {
		background-color: red;
		font-weight: bold;
		font-size: 1.6vh;
		padding: 0.5vh;
		margin: 1vh;
		height: 4vh;
		width: 13vh;
		border-width: 0.3vh;
		position: absolute;
		bottom: 0;
		right: 0;
	}
	#fullscreenbtn:hover {
		animation: alternate-colors 1s infinite;
	}

	@keyframes alternate-colors {
		0% {background-color: yellow;}
		25% {background-color: red;}
		50% {background-color: yellow;}
		75% {background-color: red;}
		100% {background-color: yellow;}
	}

</style>
</head>
<body>
	<img id="potsa" src="../media/potsa.png"><br>
	<div id="options">
		<input type="range" min="0" max="700" class="slider" id="slider">
		<p id="sliderval">-</p>
		<div id="inputs">
			<p>Range Min <input type="text" id="min" value="-200"></p>
			<br>
			<p>Range Max <input type="text" id="max" value="200"></p>
			<br><br>
			<p>Multiplier (optional) <br><input type="text" id="multiplier" value="1"></p>
		</div>
		<br>
		<button id="fullscreenbtn" onclick="fullscreen()" title="Permanent Fullscreen !!!">Fullscreen ⚠️</button>
	</div>
<script>
const potsaIMG = document.getElementById("potsa");
const slider = document.getElementById("slider");
const slider_num = document.getElementById('sliderval');
const rangeMin = document.getElementById("min");
const rangeMax = document.getElementById("max");
const multiplier = document.getElementById("multiplier");
const fullscreenBtn = document.getElementById("fullscreenbtn");
let params = new URLSearchParams(location.search);
multiplier.value = "1";

function fullscreenBrowser() {
	var el = document.documentElement,
    rfs = el.requestFullscreen;
	if(typeof rfs!="undefined" && rfs){
  		rfs.call(el);
	}
}

function fullscreen() {
	document.getElementById("options").style.display = "none";
	document.body.style.margin = "0";

	potsaIMG.style.position = "absolute";
	potsaIMG.style.bottom = "0";
	potsaIMG.style.height = "100%";
	potsaIMG.style.width = "100%";

	potsaIMG.style.pointerEvents = "none";
	potsaIMG.style.userSelect = "none";
}

function randomNum(min,max) {return Math.floor(Math.random() * (max - min)) + min;}
function randomFilter() {
	let min = parseInt(rangeMin.value);
	let max = parseInt(rangeMax.value);
	let fn = randomNum(min, max)*multiplier.value; //max 250
	const cssfilters = [
			`blur(${fn}px)`,
			`brightness(${fn}%)`,
			`contrast(${fn}%)`,
			`grayscale(${fn}%)`,
			`hue-rotate(${fn}rad)`,
			`invert(${fn}%)`,
			`saturate(${fn}%)`,
			`sepia(${fn}%)`
	];
	var i = randomNum(0,7);
	potsaIMG.style.filter = cssfilters[i];
	//console.log(cssfilters[i]);
}
//random filter speed
let filterLoop = setInterval(randomFilter, slider.value);
function reloadInterval(){
	clearInterval(filterLoop);
	filterLoop = setInterval(randomFilter, slider.value);
}

function reset(){
	slider.value = slider.max/2;
	slider_num.innerHTML = slider.value;
	rangeMin.value = "-200";
	rangeMax.value = "200";
	multiplier.value = "1";
	reloadInterval();
}

function loadParameters(){
	if (!params.toString() === '') {reset()} else {
		if (params.has('full')) {fullscreen()};
		if (params.has('mult')) {multiplier.value = params.get('mult')};
		if (params.has('speed')) {

			slider.value = params.get('speed');
			slider_num.innerHTML = params.get('speed');

			if (slider.value <= 0) {
				slider.value = slider.min;
				slider_num.innerHTML = slider.value;
			} else if (slider.value >= 700) {
				slider.value = slider.max;
				slider_num.innerHTML = slider.value;
			}

		} else {slider_num.innerHTML = slider.value;}
		if (params.has('max')) {rangeMax.value = params.get('max')};
		if (params.has('min')) {rangeMin.value = params.get('min')};
	reloadInterval();
	}
}

//event listeners
slider.addEventListener("input", function(){
	slider_num.innerHTML = this.value;
	reloadInterval();
});

fullscreenBtn.addEventListener("click", function(){
	fullscreen();
	fullscreenBrowser();
});

window.onload=(event)=>{loadParameters()};
</script>
</body>
</html>